(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4e3b"],{"91c0":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"execution"},[i("basic-container",[i("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.tableData,permission:e.permissionList,"table-loading":e.tableLoading,option:e.tableOption},on:{"on-load":e.getList,"row-update":e.handleUpdate,"row-save":e.handleSave,"search-change":e.searchChange,"size-change":e.sizeChange,"current-change":e.currentChange,"row-del":e.rowDel},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permissions.sys_dict_add?i("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-menu"},on:{click:function(i){return e.handleItem(t.row,t.index)}}},[e._v("字典项\n        ")]):e._e()]}}])})],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"字典项管理",width:"90%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.dictItemVisible}},[i("avue-crud",{ref:"crudItem",attrs:{page:e.itemPage,data:e.tableDictItemData,permission:e.permissionList,"before-open":e.handleBeforeOpen,option:e.tableDictItemOption},on:{"size-change":e.itemSizeChange,"current-change":e.itemCurrentChange,"row-update":e.handleItemUpdate,"row-save":e.handleItemSave,"row-del":e.rowItemDel},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)},n=[],s=i("5530"),r=i("59fb"),c={border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",refreshBtn:!1,showClomnuBtn:!1,searchMenuSpan:6,searchSize:"mini",column:[{label:"类型",prop:"type",search:!0,editDisabled:!0,rules:[{required:!0,message:"请输入字典类型",trigger:"blur"}]},{label:"描述",prop:"description",rules:[{required:!0,message:"请输入字典描述",trigger:"blur"}]},{label:"字典类型",prop:"system",type:"select",dicUrl:"/admin/dict/type/dict_type",rules:[{required:!0,message:"请输入字典类型",trigger:"blur"}],search:!0},{label:"备注信息",prop:"remarks"},{width:150,label:"创建时间",prop:"createTime",type:"datetime",addDisplay:!1,editDisabled:!0,format:"yyyy-MM-dd HH:mm",valueFormat:"yyyy-MM-dd HH:mm:ss"}]},o={border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",refreshBtn:!1,showClomnuBtn:!1,searchSize:"mini",column:[{label:"类型",prop:"type",addDisabled:!0,editDisabled:!0},{width:150,label:"数据值",prop:"value",rules:[{required:!0,message:"请输入数据值",trigger:"blur"}]},{label:"标签名",prop:"label",rules:[{required:!0,message:"请输入标签名",trigger:"blur"}]},{label:"描述",prop:"description",rules:[{required:!0,message:"请输入字典描述",trigger:"blur"}]},{label:"排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入排序",trigger:"blur"}]},{label:"备注信息",prop:"remarks"}]},d=i("2f62"),l={name:"Dict",data:function(){return{searchForm:{},form:{type:void 0,dictId:void 0},dictType:void 0,dictId:void 0,dialogFormVisible:!1,tableData:[],tableDictItemData:[],page:{total:0,currentPage:1,pageSize:20},itemPage:{total:0,currentPage:1,pageSize:20},tableLoading:!1,tableOption:c,tableDictItemOption:o}},computed:Object(s["a"])(Object(s["a"])({},Object(d["mapGetters"])(["permissions"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permissions.sys_dict_add,!1),delBtn:this.vaildData(this.permissions.sys_dict_del,!1),editBtn:this.vaildData(this.permissions.sys_dict_edit,!1)}}}),methods:{getList:function(e,t){var i=this;this.tableLoading=!0,Object(r["f"])(Object.assign({current:e.currentPage,size:e.pageSize},t,this.searchForm)).then((function(e){i.tableData=e.data.records,i.page.total=e.data.total,i.tableLoading=!1}))},rowDel:function(e){var t=this;this.$confirm('是否确认删除数据类型为"'+e.type+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["d"])(e)})).then((function(){t.getList(t.page),t.$message.success("删除成功")})).catch((function(){}))},handleUpdate:function(e,t,i){var a=this;Object(r["h"])(e).then((function(){a.$message.success("修改成功"),a.getList(a.page),i()}))},handleSave:function(e,t){var i=this;Object(r["b"])(e).then((function(){i.$message.success("添加成功"),i.getList(i.page),t()}))},searchChange:function(e,t){this.searchForm=e,this.getList(this.page,e),t()},sizeChange:function(e){this.page.pageSize=e},currentChange:function(e){this.page.currentPage=e},dictItemVisible:function(){this.dialogFormVisible=!1,this.itemPage.currentPage=1},handleItem:function(e){this.getDictItemList(e.id,e.type)},getDictItemList:function(e,t){var i=this;this.dictType=t,this.dictId=e,this.dialogFormVisible=!0,Object(r["e"])(Object.assign({current:this.itemPage.currentPage,size:this.itemPage.pageSize},{dictId:e})).then((function(e){i.tableDictItemData=e.data.records,i.itemPage.total=e.data.total}))},handleBeforeOpen:function(e){this.form.type=this.dictType,this.form.dictId=this.dictId,e()},handleItemSave:function(e,t){var i=this;Object(r["a"])(e).then((function(){i.$message.success("添加成功"),i.getDictItemList(e.dictId,e.type),t()}))},handleItemUpdate:function(e,t,i){var a=this;Object(r["g"])(e).then((function(){a.$message.success("修改成功"),a.getDictItemList(e.dictId,e.type),i()}))},itemSizeChange:function(e){this.itemPage.pageSize=e,this.getDictItemList(this.dictId,this.type)},itemCurrentChange:function(e){this.itemPage.currentPage=e,this.getDictItemList(this.dictId,this.type)},rowItemDel:function(e){var t=this;this.$confirm('是否确认删除数据为"'+e.label+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["c"])(e.id)})).then((function(){t.getDictItemList(e.dictId,e.type),t.$message.success("删除成功")})).catch((function(){}))}}},u=l,g=i("2877"),m=Object(g["a"])(u,a,n,!1,null,"d36c929e",null);t["default"]=m.exports}}]);