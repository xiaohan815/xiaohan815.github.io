(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c470da2"],{"47d8":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"execution"},[n("basic-container",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:t.q.nickname,callback:function(e){t.$set(t.q,"nickname",e)},expression:"q.nickname"}})],1)]),t._v(" "),n("el-col",{attrs:{span:4}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-select",{attrs:{placeholder:"请选择公众号"},model:{value:t.q.account,callback:function(e){t.$set(t.q,"account",e)},expression:"q.account"}},t._l(t.wxAccountList,(function(t){return n("el-option",{key:t.appid,attrs:{label:t.name,value:t.appid}})})),1)],1)]),t._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-sort"},on:{click:t.asyncFans}},[t._v("同步")])],1)])],1),t._v(" "),n("avue-crud",{ref:"crud",attrs:{page:t.page,data:t.tableData,permission:t.permissionList,"table-loading":t.tableLoading,option:t.tableOption},on:{"on-load":t.getList,"size-change":t.sizeChange,"current-change":t.currentChange,"refresh-change":t.refreshChange,"row-update":t.handleUpdate,"row-save":t.handleSave,"row-del":t.rowDel}})],1)],1)},c=[],i=n("5530"),s=n("b775");function r(t){return Object(s["default"])({url:"/mp/wxaccountfans/page",method:"get",params:t})}function o(t){return Object(s["default"])({url:"/mp/wxaccountfans",method:"post",data:t})}function u(t){return Object(s["default"])({url:"/mp/wxaccountfans/sync/"+t,method:"post"})}function l(t){return Object(s["default"])({url:"/mp/wxaccountfans/"+t,method:"delete"})}function p(t){return Object(s["default"])({url:"/mp/wxaccountfans",method:"put",data:t})}var d=n("bec0"),h={border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",viewBtn:!0,addBtn:!1,editBtn:!1,align:"center",searchMenuSpan:6,column:[{label:"主键",prop:"id",hide:!1},{label:"公众号",prop:"wxAccountName"},{label:"昵称",prop:"nickname",overHidden:!0},{label:"用户标识",prop:"openid",overHidden:!0},{label:"性别",prop:"gender",type:"select",dicUrl:"/admin/dict/type/gender"},{label:"语言",prop:"language",hide:!0},{label:"国家",prop:"country",hide:!0},{label:"省份",prop:"province",hide:!0},{label:"城市",prop:"city"},{label:"订阅状态",prop:"subscribeStatus",type:"select",dicUrl:"/admin/dict/type/subscribe"},{label:"订阅时间",prop:"subscribeTime"},{label:"备注",prop:"remark",hide:!0},{label:"头像地址",prop:"headimgUrl",type:"upload",imgWidth:60,imgFullscreen:!0,editDisplay:!1,addDisplay:!1,listType:"picture-img"}]},g=n("2f62"),f={name:"Wxaccountfans",data:function(){return{q:{},tableData:[],wxAccountList:[],page:{total:0,currentPage:1,pageSize:20},tableLoading:!1,tableOption:h}},created:function(){this.getAccountList()},computed:Object(i["a"])(Object(i["a"])({},Object(g["mapGetters"])(["permissions"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permissions.mp_wxaccountfans_add,!1),delBtn:this.vaildData(this.permissions.mp_wxaccountfans_del,!1),editBtn:this.vaildData(this.permissions.mp_wxaccountfans_edit,!1)}}}),methods:{getAccountList:function(){var t=this;Object(d["c"])().then((function(e){t.wxAccountList=e.data.data}))},getList:function(t,e){var n=this;this.tableLoading=!0,r(Object.assign({current:t.currentPage,size:t.pageSize},e)).then((function(t){n.tableData=t.data.data.records,n.page.total=t.data.data.total,n.tableLoading=!1}))},rowDel:function(t,e){var n=this,a=this;this.$confirm("是否确认删除ID为"+t.id,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l(t.id)})).then((function(){a.tableData.splice(e,1),a.$message({showClose:!0,message:"删除成功",type:"success"}),n.getList(n.page)})).catch((function(){}))},handleUpdate:function(t,e,n){var a=this;p(t).then((function(){a.tableData.splice(e,1,Object.assign({},t)),a.$message({showClose:!0,message:"修改成功",type:"success"}),n(),a.getList(a.page)}))},handleSave:function(t,e){var n=this;o(t).then((function(){n.tableData.push(Object.assign({},t)),n.$message({showClose:!0,message:"添加成功",type:"success"}),e(),n.getList(n.page)}))},sizeChange:function(t){this.page.pageSize=t},currentChange:function(t){this.page.currentPage=t},refreshChange:function(){this.getList(this.page)},search:function(){this.getList(this.page,this.q)},asyncFans:function(){var t=this;this.q.account?(u(this.q.account).then((function(){t.$message({showClose:!0,message:"已开始从微信同步粉丝信息，建议等待后查询",type:"success"})})),this.getList(this.page)):this.$message.error("请选择公众号")}}},m=f,b=n("2877"),w=Object(b["a"])(m,a,c,!1,null,"6f9d8e7d",null);e["default"]=w.exports},bec0:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"g",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return l}));var a=n("b775");function c(t){return Object(a["default"])({url:"/mp/wxaccount/page",method:"get",params:t})}function i(t){return Object(a["default"])({url:"/mp/wxaccount",method:"post",data:t})}function s(t){return Object(a["default"])({url:"/mp/wxaccount/qr/"+t,method:"post"})}function r(t){return Object(a["default"])({url:"/mp/wxaccount/"+t,method:"delete"})}function o(t){return Object(a["default"])({url:"/mp/wxaccount",method:"put",data:t})}function u(){return Object(a["default"])({url:"/mp/wxaccount/list",method:"get"})}function l(t){return Object(a["default"])({url:"/mp/wxaccount/statistics",method:"get",params:t})}}}]);