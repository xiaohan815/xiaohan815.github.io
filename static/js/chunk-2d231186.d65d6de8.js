(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d231186"],{eea1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"execution"},[a("basic-container",[a("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.tableData,"table-loading":e.tableLoading,option:e.tableOption},on:{"on-load":e.getList,"search-change":e.searchChange,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"current-change":e.currentChange,"row-save":e.handleSave,"row-del":e.rowDel},scopedSlots:e._u([{key:"menuBtn",fn:function(t){return[e.permissions.act_model_manage?a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(a){return e.handleView(t.row,t.index)}}},[e._v("模型图\n        ")]):e._e(),e._v(" "),e.permissions.act_model_manage?a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(a){return e.handleDeploy(t.row,t.index)}}},[e._v("部署\n        ")]):e._e(),e._v(" "),e.permissions.act_model_manage?a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(a){return e.handleDel(t.row,t.index)}}},[e._v("删除\n        ")]):e._e()]}}])})],1)],1)},i=[],r=(a("7f7f"),a("5530")),s=a("b775");function o(e){return Object(s["default"])({url:"/act/model",method:"get",params:e})}function d(e){return Object(s["default"])({url:"/act/model/"+e,method:"delete"})}function c(e){return Object(s["default"])({url:"/act/model/deploy/"+e,method:"post"})}function l(e){return Object(s["default"])({url:"/act/model/insert",method:"post",data:e})}var u={border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",menuBtn:!0,align:"center",editBtn:!1,delBtn:!1,viewBtn:!0,menuType:"menu",searchMenuSpan:6,column:[{fixed:!0,label:"模型ID",prop:"id",editDisabled:!0,addDisplay:!1},{fixed:!0,label:"模型标识",prop:"key",editDisabled:!0,rules:[{required:!0,message:"请输入模型标识",trigger:"blur"}]},{label:"流程分类",prop:"category",search:!0,rules:[{required:!0,message:"请输入流程分类",trigger:"blur"}]},{label:"模型名称",prop:"name",rules:[{required:!0,message:"请输入模型名称",trigger:"blur"}]},{label:"描述",prop:"desc",hide:!0,editDisabled:!1,addDisplay:!0,rules:[{required:!0,message:"请输入描述",trigger:"blur"}]},{label:"版本号",prop:"version",editDisabled:!0,addDisplay:!1},{label:"创建时间",prop:"createTime",type:"datetime",format:"yyyy-MM-dd HH:mm",valueFormat:"timestamp",editDisabled:!0,addDisplay:!1},{label:"最后更新时间",prop:"lastUpdateTime",type:"datetime",format:"yyyy-MM-dd HH:mm",valueFormat:"timestamp",editDisabled:!0,addDisplay:!1}]},p=a("2f62"),m=(a("a18c"),{name:"Activiti",data:function(){return{searchForm:{},tableData:[],page:{total:0,currentPage:1,pageSize:20},tableLoading:!1,tableOption:u}},created:function(){},mounted:function(){},computed:Object(r["a"])({},Object(p["mapGetters"])(["permissions"])),methods:{getList:function(e,t){var a=this;this.tableLoading=!0,o(Object.assign({descs:"create_time",current:e.currentPage,size:e.pageSize},t,this.searchForm)).then((function(e){a.tableData=e.data.records,a.page.total=e.data.total,a.tableLoading=!1})).catch((function(){a.tableLoading=!1}))},handleView:function(e){var t="模型id为".concat(e.id,"的").concat(e.name,"流程图"),a="/activti/detail/".concat(e.id);this.$router.push({path:a,query:{name:t}})},handleDel:function(e,t){this.$refs.crud.rowDel(e,t)},handleDeploy:function(e){var t=this;this.$confirm('是否确认部署ID为"'+e.id+'"的模型?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return c(e.id)})).then((function(){t.getList(t.page),t.$message.success("部署成功")}))},rowDel:function(e){var t=this;this.$confirm('是否确认删除ID为"'+e.id+'"的模型?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(e.id)})).then((function(){t.getList(t.page),t.$message.success("删除成功")}))},handleSave:function(e,t){var a=this;l(e).then((function(){a.$message.success("添加成功"),t(),a.getList(a.page)}))},searchChange:function(e,t){this.searchForm=e,this.getList(this.page,e),t()},sizeChange:function(e){this.page.pageSize=e},currentChange:function(e){this.page.currentPage=e},refreshChange:function(){this.getList(this.page)}}}),g=m,h=a("2877"),f=Object(h["a"])(g,n,i,!1,null,null,null);t["default"]=f.exports}}]);