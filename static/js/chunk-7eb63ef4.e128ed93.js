(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eb63ef4","chunk-53320d4c","chunk-3f8cba1b"],{"31ed":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.data,(function(e){return a("el-tab-pane",{key:e.k,attrs:{lazy:!0,label:e.k,name:e.k}},[a("Java",{attrs:{value:e.v,height:"600px"}})],1)})),1)},r=[],i=(a("a481"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"json-editor"},[a("textarea",{ref:"textarea"})])}),o=[],l=a("56b3"),c=a.n(l),s=(a("a7be"),a("b866"),a("4ba6"),{props:{value:{type:String,required:!0},height:{type:String,required:!0}},data:function(){return{editor:!1}},watch:{value:function(e){var t=this.editor.getValue();e!==t&&this.editor.setValue(this.value)},height:function(e){this.editor.setSize("auto",this.height)}},mounted:function(){this.editor=c.a.fromTextArea(this.$refs.textarea,{mode:"text/x-java",lineNumbers:!0,lint:!0,lineWrapping:!0,tabSize:2,cursorHeight:.9,theme:"idea",readOnly:!0}),this.editor.setSize("auto",this.height),this.editor.setValue(this.value)},methods:{getValue:function(){return this.editor.getValue()}}}),u=s,d=(a("3505"),a("2877")),p=Object(d["a"])(u,i,o,!1,null,"0b36184e",null),h=p.exports,b=a("844c"),f={name:"Preview",components:{Java:h},props:{queryData:{}},data:function(){return{data:[],height:"",activeName:"Entity.java"}},created:function(){var e=this;Object(b["j"])(this.queryData).then((function(t){var a=t.data;for(var n in a){var r=n.replace(/^template\/|.vm$/g,""),i=a[n],o={k:r,v:i};e.data.push(o)}}))}},m=f,g=Object(d["a"])(m,n,r,!1,null,null,null);t["default"]=g.exports},3505:function(e,t,a){"use strict";var n=a("a062"),r=a.n(n);r.a},3678:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return l}));var n={selection:!0,border:!0,index:!0,stripe:!0,menuAlign:"center",align:"center",addBtn:!1,editBtn:!1,delBtn:!1,searchMenuSpan:6,column:[{label:"表名称",prop:"tableName",align:"center"},{label:"表注释",prop:"tableComment",align:"center"},{label:"表编码",prop:"tableCollation",align:"center"},{label:"索引",prop:"engine",align:"center"},{type:"datetime",valueFormat:"timestamp",format:"yyyy-MM-dd hh:mm:ss",label:"创建时间",prop:"createTime",align:"center"}]},r={submitBtn:!1,emptyBtn:!1,column:[{label:"表名称",prop:"tableName",disabled:!0},{label:"包名",prop:"packageName",placeholder:"可为空，加载系统默认配置"},{label:"作者",prop:"author",placeholder:"可为空，加载系统默认配置"},{label:"模块",prop:"moduleName",placeholder:"可为空，加载系统默认配置"},{label:"表前缀",prop:"tablePrefix",placeholder:"可为空，加载系统默认配置"},{label:"注释",prop:"comments",placeholder:"可为空，加载表备注"},{label:"前端风格",prop:"style",type:"radio",slot:!0,border:!0,span:24,dicUrl:"/admin/dict/type/style_type"}]},i={submitText:"生成",column:[{label:"表名称",prop:"tableName",disabled:!0,minRows:2,type:"textarea",row:!0,span:24},{label:"包名",prop:"packageName",placeholder:"可为空，加载系统默认配置"},{label:"作者",prop:"author",placeholder:"可为空，加载系统默认配置"},{label:"模块",prop:"moduleName",placeholder:"可为空，加载系统默认配置"},{label:"注释",prop:"comments",placeholder:"可为空，加载表备注"}]},o={border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",column:[{label:"主键",prop:"id",hide:!0,addDisplay:!1,editDisplay:!1},{label:"名称",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:"blur"},{max:32,message:"长度在 32 个字符",trigger:"blur"}]},{label:"jdbcUrl",prop:"url",type:"textarea",span:24,row:!0,minRows:2,overHidden:!0,rules:[{required:!0,message:"请输入jdbcUrl",trigger:"blur"}]},{label:"用户名",prop:"username",rules:[{required:!0,message:"请输入用户名",trigger:"blur"},{max:32,message:"长度在 32 个字符",trigger:"blur"}]},{label:"密码",prop:"password",rules:[{required:!0,message:"请输入密码",trigger:"blur"},{max:32,message:"长度在 32 个字符",trigger:"blur"}]},{label:"创建时间",prop:"createDate",addDisplay:!1,editDisplay:!1,overHidden:!0},{label:"更新时间",prop:"updateDate",overHidden:!0,addDisplay:!1,editDisplay:!1}]},l={rowKey:"tableName",border:!0,index:!0,stripe:!0,menuAlign:"center",align:"center",menu:!1,searchMenuSpan:6,column:[{label:"字段名",prop:"columnName",align:"center"},{label:"注释",prop:"comments",align:"center"},{label:"字段类型",prop:"columnType",align:"center"},{label:"JAVA类型",prop:"javaType",align:"center"}]}},"42f4":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("basic-container",[a("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.tableData,"table-loading":e.tableLoading,option:e.tableOption},on:{"on-load":e.getList,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"current-change":e.currentChange}})],1)},r=[],i=a("844c"),o=a("3678"),l={name:"GenEdit",props:{queryData:{}},data:function(){return{tableData:[],page:{total:0,currentPage:1,pageSize:20},tableLoading:!1,tableOption:o["c"]}},methods:{getList:function(e){var t=this;this.tableLoading=!0,Object(i["g"])(Object.assign({current:e.currentPage,size:e.pageSize},this.queryData)).then((function(e){t.tableData=e.data.records,t.page.total=e.data.total,t.tableLoading=!1})).catch((function(){t.tableLoading=!1}))},sizeChange:function(e){this.page.pageSize=e},currentChange:function(e){this.page.currentPage=e},refreshChange:function(){this.getList(this.page)}}},c=l,s=a("2877"),u=Object(s["a"])(c,n,r,!1,null,null,null);t["default"]=u.exports},"844c":function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"k",(function(){return s})),a.d(t,"j",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"g",(function(){return p})),a.d(t,"f",(function(){return h})),a.d(t,"i",(function(){return b}));var n=a("b775");function r(e){return Object(n["default"])({url:"/gen/generator/page",method:"get",params:e})}function i(e){return Object(n["default"])({url:"/gen/dsconf/page",method:"get",params:e})}function o(){return Object(n["default"])({url:"/gen/dsconf/list",method:"get"})}function l(e){return Object(n["default"])({url:"/gen/dsconf/",method:"post",data:e})}function c(e){return Object(n["default"])({url:"/gen/dsconf/"+e,method:"delete"})}function s(e){return Object(n["default"])({url:"/gen/dsconf/",method:"put",data:e})}function u(e){return Object(n["default"])({url:"/gen/generator/preview",method:"get",params:e})}function d(e){return Object(n["default"])({url:"/gen/generator/code",method:"post",data:e,responseType:"arraybuffer"}).then((function(t){var a=new Blob([t],{type:"application/zip"}),n=e.tableName+".zip",r=document.createElement("a");r.href=URL.createObjectURL(a),r.download=n,document.body.appendChild(r),r.click(),window.setTimeout((function(){URL.revokeObjectURL(a),document.body.removeChild(r)}),0)}))}function p(e){return Object(n["default"])({url:"/gen/generator/table",params:e,method:"get"})}function h(e,t){return Object(n["default"])({url:"/gen/form/info",params:{tableName:e,dsName:t},method:"get"})}function b(e,t,a){return Object(n["default"])({url:"/gen/form/",method:"post",data:Object.assign({formInfo:e,tableName:t,dsId:a})})}},a062:function(e,t,a){},dfa0:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"execution"},[a("basic-container",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-select",{attrs:{placeholder:"请选择数据源"},on:{change:e.search},model:{value:e.q.dsName,callback:function(t){e.$set(e.q,"dsName",t)},expression:"q.dsName"}},e._l(e.dataSourceList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-input",{attrs:{placeholder:"表名称"},model:{value:e.q.tableName,callback:function(t){e.$set(e.q,"tableName",t)},expression:"q.tableName"}})],1)]),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.openBatch}},[e._v("批量生成")])],1)])],1),e._v(" "),a("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.tableData,"table-loading":e.tableLoading,option:e.tableOption},on:{"on-load":e.getList,"size-change":e.sizeChange,"current-change":e.currentChange,"refresh-change":e.refreshChange},scopedSlots:e._u([{key:"menu",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-check"},on:{click:function(a){return e.handleDown(t.row,t.index)}}},[e._v("生成\n        ")]),e._v(" "),a("el-button",{attrs:{type:"text",icon:"icon-sheji"},on:{click:function(a){return e.handleDesign(t.row,t.index)}}},[e._v("设计\n        ")])]}}])}),e._v(" "),a("el-dialog",{attrs:{visible:e.box,title:"生成配置",width:"50%","lock-scroll":""},on:{"update:visible":function(t){e.box=t}}},[a("div",{staticClass:"pull-auto"},[a("avue-form",{ref:"formData",attrs:{option:e.formOption},scopedSlots:e._u([{key:"menuForm",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-view",plain:""},on:{click:function(t){return e.handleView()}}},[e._v("预览\n            ")]),e._v(" "),a("el-button",{attrs:{type:"info",icon:"el-icon-check",plain:""},on:{click:function(t){return e.gen()}}},[e._v("下载\n            ")])]}}]),model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}})],1)]),e._v(" "),a("el-dialog",{attrs:{visible:e.boxBatch,title:"批量生成",width:"50%","lock-scroll":""},on:{"update:visible":function(t){e.boxBatch=t}}},[a("div",{staticClass:"pull-auto"},[a("avue-form",{ref:"formBatchData",attrs:{option:e.formBatchOption},on:{submit:e.batchGen},model:{value:e.formBatchData,callback:function(t){e.formBatchData=t},expression:"formBatchData"}})],1)])],1),e._v(" "),a("el-dialog",{attrs:{title:e.preview.title,visible:e.preview.open,width:"80%",top:"5vh","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.preview,"open",t)}}},[e.preview.open?a("Preview",{attrs:{queryData:this.formData}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.table.title,visible:e.table.open,width:"80%",top:"5vh","append-to-body":""},on:{"update:visible":function(t){return e.$set(e.table,"open",t)}}},[e.table.open?a("Table",{attrs:{queryData:this.formData}}):e._e()],1)],1)},r=[],i=a("b85c"),o=a("844c"),l=a("3678"),c=a("31ed"),s=a("42f4"),u={name:"CodeGenerator",components:{Preview:c["default"],Table:s["default"]},data:function(){return{q:{},dataSourceList:[],tableData:[],formData:{},formBatchData:{},box:!1,boxBatch:!1,page:{total:0,currentPage:1,pageSize:20},tableLoading:!1,tableOption:l["e"],formOption:l["b"],formBatchOption:l["a"],preview:{open:!1,title:"代码预览"},table:{open:!1,title:"字段预览"}}},created:function(){this.getdataSourceList()},methods:{getList:function(e){var t=this;this.tableLoading=!0,Object(o["d"])(Object.assign({current:e.currentPage,size:e.pageSize},this.q)).then((function(e){t.tableData=e.data.records,t.page.total=e.data.total,t.tableLoading=!1}))},handleView:function(){this.formData.dsName=this.q.dsName,this.preview.open=!0,this.table.open=!1},handleDesign:function(e){this.$router.push({path:"/gen/design",query:{tableName:e.tableName,dsName:this.q.dsName}})},handleTable:function(e){this.formData.tableName=e.tableName,this.formData.dsName=this.q.dsName,this.table.open=!0,this.preview.open=!1},handleDown:function(e){this.formData.tableName=e.tableName,this.box=!0},sizeChange:function(e){this.page.pageSize=e},currentChange:function(e){this.page.currentPage=e},refreshChange:function(){this.getList(this.page)},gen:function(){var e=this;this.formData.dsName=this.q.dsName,Object(o["h"])(this.formData).then((function(){e.box=!1}))},getdataSourceList:function(){var e=this;Object(o["e"])().then((function(t){e.dataSourceList=t.data}))},search:function(){this.getList(this.page)},openBatch:function(){if(this.$refs.crud.tableSelect.length<=1||this.$refs.crud.tableSelect.length>10)return this.$message.error("选中表数量不合法，数量最少2个或最多为10个"),!1;var e,t=[],a=Object(i["a"])(this.$refs.crud.tableSelect);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(n.tableName)}}catch(r){a.e(r)}finally{a.f()}this.formBatchData.tableName=t.join("-"),this.boxBatch=!0},batchGen:function(e,t){var a=this;this.formBatchData.dsName=this.q.dsName,Object(o["h"])(this.formBatchData).then((function(){t(),a.boxBatch=!1})).catch((function(){t()}))}}},d=u,p=a("2877"),h=Object(p["a"])(d,n,r,!1,null,"1ec9a340",null);t["default"]=h.exports}}]);