(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230495"],{ec45:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"execution"},[a("basic-container",[a("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.tableData,"table-loading":e.tableLoading,option:e.tableOption,permission:e.permissionList},on:{"on-load":e.getList,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"current-change":e.currentChange,"row-del":e.handleDel}})],1)],1)},i=[],o=a("5530"),r=a("b775");function s(e){return Object(r["default"])({url:"/daemon/execution-log/page",method:"get",params:e})}function l(e){return Object(r["default"])({url:"/daemon/execution-log/"+e,method:"delete"})}var c={isSuccess:[{label:"成功",value:1},{label:"失败",value:0}]},u={border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",searchMenuSpan:6,editBtn:!1,addBtn:!1,viewBtn:!0,column:[{label:"ID",prop:"id",hide:!0},{label:"任务名称",prop:"jobName"},{label:"任务ID",prop:"taskId",hide:!0,overHidden:!0},{label:"主机名",prop:"hostname",hide:!0},{label:"IP",prop:"ip"},{width:80,label:"分片项",prop:"shardingItem"},{label:"执行源",prop:"executionSource",hide:!0},{label:"失败原因",prop:"failureCause",hide:!0},{width:100,label:"执行结果",prop:"isSuccess",type:"select",dicData:c.isSuccess},{label:"开始时间",prop:"startTime",hide:!0},{label:"完成时间",prop:"completeTime"}]},d=a("2f62"),p={name:"ExecutionLog",data:function(){return{tableData:[],page:{total:0,currentPage:1,pageSize:20},tableLoading:!1,tableOption:u}},created:function(){this.page.pageSize=20},mounted:function(){},computed:Object(o["a"])(Object(o["a"])({},Object(d["mapGetters"])(["permissions"])),{},{permissionList:function(){return{delBtn:this.vaildData(this.permissions.daemon_execution_log_del,!1)}}}),methods:{getList:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tableLoading=!0,s(Object.assign({current:e.currentPage,size:e.pageSize,descs:"start_time"},a)).then((function(e){t.tableData=e.data.data.records,t.page.total=e.data.data.total,t.tableLoading=!1}))},handleDel:function(e,t){var a=this;this.$confirm("是否确认删除ID为"+e.id,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l(e.id)})).then((function(){a.$message.success("删除成功"),a.getList(a.page)}))},sizeChange:function(e){this.page.pageSize=e},currentChange:function(e){this.page.currentPage=e},refreshChange:function(){this.getList(this.page)}}},g=p,h=a("2877"),b=Object(h["a"])(g,n,i,!1,null,"7bbe2fbb",null);t["default"]=b.exports}}]);