(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e9d36"],{"8ed7":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"execution"},[a("basic-container",[a("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.tableData,"table-loading":e.tableLoading,option:e.tableOption},on:{"on-load":e.getList,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"current-change":e.currentChange,"search-change":e.searchChange,"row-update":e.handleUpdate,"row-save":e.handleSave,"row-del":e.rowDel},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permissions.daemon_status_trace_log_del?a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDel(t.row,t.index)}}},[e._v("删除\n        ")]):e._e()]}}])})],1)],1)},r=[],i=a("5530"),s=a("b775");function o(e){return Object(s["default"])({url:"/daemon/status-trace-log/page",method:"get",params:e})}function c(e){return Object(s["default"])({url:"/daemon/status-trace-log",method:"post",data:e})}function l(e){return Object(s["default"])({url:"/daemon/status-trace-log/"+e,method:"delete"})}function d(e){return Object(s["default"])({url:"/daemon/status-trace-log",method:"put",data:e})}var u={state:[{label:"准备中",value:"TASK_STAGING"},{label:"执行中",value:"TASK_RUNNING"},{label:"已经完成",value:"TASK_FINISHED"}]},h={border:!0,index:!0,stripe:!0,menuAlign:"center",align:"center",editBtn:!1,delBtn:!1,searchMenuSpan:6,addBtn:!1,viewBtn:!0,column:[{label:"ID",prop:"id",hide:!0},{label:"作业名称",prop:"jobName",search:!0},{label:"原任务",prop:"originalTaskId",hide:!0,width:100},{label:"任务ID",prop:"taskId",hide:!0},{label:"服务器IP",prop:"slaveId"},{label:"资源",prop:"source",hide:!0},{label:"执行类型",prop:"executionType",hide:!0},{width:100,label:"分片项",prop:"shardingItem"},{width:100,label:"状态",prop:"state",type:"select",dicData:u.state,search:!0},{label:"消息",prop:"message",width:100,overHidden:!0,hide:!0},{label:"创建时间",prop:"creationTime"}]},p=a("2f62"),g={name:"StatusTraceLog",data:function(){return{searchForm:{},tableData:[],page:{total:0,currentPage:1,pageSize:20},tableLoading:!1,tableOption:h}},computed:Object(i["a"])({},Object(p["mapGetters"])(["permissions"])),methods:{getList:function(e,t){var a=this;this.tableLoading=!0,o(Object.assign({current:e.currentPage,size:e.pageSize},t,this.searchForm)).then((function(e){a.tableData=e.data.data.records,a.page.total=e.data.data.total,a.tableLoading=!1}))},handleAdd:function(){this.$refs.crud.rowAdd()},handleEdit:function(e,t){this.$refs.crud.rowEdit(e,t)},handleDel:function(e,t){this.$refs.crud.rowDel(e,t)},rowDel:function(e,t){var a=this;this.$confirm("是否确认删除ID为"+e.id,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l(e.clientId)})).then((function(){a.$message.success("删除成功"),a.refreshChange()}))},handleUpdate:function(e,t,a){var n=this;d(e).then((function(){n.$message.success("修改成功"),n.refreshChange(),a()}))},handleSave:function(e,t){var a=this;c(e).then((function(){a.$message.success("添加成功"),a.refreshChange(),t()}))},searchChange:function(e,t){this.searchForm=e,this.getList(this.page,e),t()},sizeChange:function(e){this.page.pageSize=e},currentChange:function(e){this.page.currentPage=e},refreshChange:function(){this.getList(this.page)}}},f=g,b=a("2877"),m=Object(b["a"])(f,n,r,!1,null,"457b94e2",null);t["default"]=m.exports}}]);