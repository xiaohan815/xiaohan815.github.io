(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b99ba"],{3458:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"execution"},[a("basic-container",[a("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.tableData,permission:e.permissionList,"table-loading":e.tableLoading,option:e.tableOption,"upload-after":e.uploadAfter},on:{"on-load":e.getList,"search-change":e.searchChange,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"current-change":e.currentChange,"row-del":e.rowDel},scopedSlots:e._u([{key:"menu",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-download"},on:{click:function(a){return e.download(t.row,t.index)}}},[e._v("下载\n        ")])]}}])})],1),e._v(" "),a("a",{staticStyle:{display:"none"},attrs:{id:"downloadA",target:"_blank"}})],1)},i=[],s=a("5530"),o=a("b775");function r(e){return Object(o["default"])({url:"/admin/sys-file/page",method:"get",params:e})}function d(e){return Object(o["default"])({url:"/admin/sys-file/"+e,method:"delete"})}var l={border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",align:"center",viewBtn:!1,searchMenuSpan:6,saveBtn:!1,submitBtn:!1,addBtn:!0,column:[{label:"编号",prop:"id",hide:!0,addDisplay:!1},{hide:!0,label:"附件上传",prop:"imgUrl",type:"upload",loadText:"附件上传中，请稍等",span:24,propsHttp:{res:""},tip:"上传同步至文件服务器",action:"/admin/sys-file/upload"},{label:"空间",prop:"bucketName",overHidden:!0,addDisplay:!1},{label:"文件名",prop:"fileName",overHidden:!0,search:!0,addDisplay:!1},{label:"原文件名",prop:"original",overHidden:!0,addDisplay:!1},{label:"文件类型",prop:"type",addDisplay:!1},{label:"文件大小",prop:"fileSize",addDisplay:!1},{label:"上传人",prop:"createUser",addDisplay:!1},{width:180,label:"创建时间",prop:"createTime",type:"datetime",format:"yyyy-MM-dd HH:mm",valueFormat:"yyyy-MM-dd HH:mm:ss",editDisabled:!0,addDisplay:!1,span:24}]},c=a("2f62"),p=(a("ca00"),{name:"SysFile",data:function(){return{searchForm:{},tableData:[],page:{total:0,currentPage:1,pageSize:20},tableLoading:!1,tableOption:l}},created:function(){},mounted:function(){},computed:Object(s["a"])(Object(s["a"])({},Object(c["mapGetters"])(["permissions"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permissions.sys_file_add,!0),delBtn:this.vaildData(this.permissions.sys_file_del,!0),editBtn:this.vaildData(this.permissions.sys_file_edit,!1)}}}),methods:{getList:function(e,t){var a=this;this.tableLoading=!0,r(Object.assign({descs:"create_time",current:e.currentPage,size:e.pageSize},t,this.searchForm)).then((function(e){a.tableData=e.data.records,a.page.total=e.data.total,a.tableLoading=!1})).catch((function(){a.tableLoading=!1}))},rowDel:function(e,t){var a=this,n=this;this.$confirm("是否确认删除ID为"+e.id,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return d(e.id)})).then((function(e){n.$message.success("删除成功"),a.getList(a.page)}))},searchChange:function(e,t){this.getList(this.page,e),t()},refreshChange:function(){this.searchForm=this.form,this.getList(this.page)},sizeChange:function(e){this.page.pageSize=e},currentChange:function(e){this.page.currentPage=e},download:function(e,t){console.log(JSON.stringify(e)),document.getElementById("downloadA").href="/admin/sys-file/"+e.bucketName+"/"+e.fileName,document.getElementById("downloadA").click()},uploadAfter:function(e,t,a){this.$message.success("上传成功"),t(),this.getList(this.page)}}}),u=p,h=a("2877"),g=Object(h["a"])(u,n,i,!1,null,null,null);t["default"]=g.exports}}]);