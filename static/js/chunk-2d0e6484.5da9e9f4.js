(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6484"],{"97a1":function(e,i,t){"use strict";t.r(i);var a=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("basic-container",[t("avue-crud",{ref:"crud",attrs:{option:e.option,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"icon",fn:function(e){return[t("div",{staticStyle:{"text-align":"center"}},[t("i",{class:e.row.icon})])]}},{key:"type",fn:function(i){return[t("div",{staticStyle:{"text-align":"center"}},["1"!==i.row.type?t("el-tag",{attrs:{size:"small",type:"success"}},[e._v("菜单")]):"1"===i.row.type?t("el-tag",{attrs:{size:"small",type:"info"}},[e._v("按钮")]):e._e()],1)]}}]),model:{value:e.form,callback:function(i){e.form=i},expression:"form"}})],1)},n=[],o=(t("6762"),t("2fdb"),t("5530")),r=t("ef70"),s=t("61f7"),l=t("2f62"),d=[{label:"阿里云图标",list:["icon-quanxianguanli","icon-yonghuguanli","icon-jiaoseguanli","icon-web-icon-","icon-xitongguanli","icon-rizhiguanli","icon-navicon-zdgl","icon-weibiaoti46","icon-miyue","icon-shouji","icon-miyue","icon-denglvlingpai","icon-luyou","icon-msnui-supervise","icon-server","icon-wendang","icon-gtsquanjushiwufuwuGTS","icon-caidanguanli","icon-guanwang","icon-guanwangfangwen","icon-guiji","icon-fensiguanli","icon-gongzhonghao","icon-anniu_weixincaidanlianjie","icon-weixincaidan","icon-xiaoxiguanli","icon-zhexiantu","icon-canshu","icon-erji-zuhushouye","icon-pay6zhifu","icon-zhifuqudaoguanli","icon-dingdan","icon-tuikuan","icon-webicon14","icon-shouyintai","icon-wenjianguanli","icon-mysql","icon-shejiyukaifa-","icon-record","icon-biaodanbiaoqian"]}],p={tip:!1,lazy:!0,dialogWidth:"60%",tree:!0,border:!0,index:!0,viewBtn:!0,align:"center",column:[{label:"名称",prop:"name",width:180,rules:[{required:!0,message:"请输入名称",trigger:"blur"}]},{label:"类型",prop:"type",type:"select",slot:!0,border:!0,valueFormat:"string",dicData:[{label:"左菜单",value:"0"},{label:"顶菜单",value:"2"},{label:"按钮",value:"1"}],rules:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]},{label:"路由路径",prop:"path",width:180,addDisplay:!0,editDisplay:!0,overHidden:!0,rules:[{required:!0,message:"请输入路由地址",trigger:"blur"}]},{label:"上级菜单",prop:"parentId",type:"tree",dicUrl:"/admin/menu/tree",formslot:!1,addDisplay:!0,editDisplay:!0,dicFlag:!0,hide:!0,props:{label:"name",value:"id"},rules:[{required:!0,message:"请选择上级菜单",trigger:"click"}]},{label:"图标",prop:"icon",type:"icon-select",slot:!0,addDisplay:!0,editDisplay:!0,iconList:d,rules:[{required:!0,message:"请输入图标",trigger:"click"}]},{label:"权限标识",prop:"permission",addDisplay:!0,editDisplay:!0,rules:[{required:!0,message:"权限标识",trigger:"blur"}]},{hide:!0,addDisplay:!0,editDisplay:!0,label:"路由缓冲",prop:"keepAlive",type:"radio",border:!0,valueFormat:"string",dicData:[{label:"关闭",value:"0"},{label:"打开",value:"1"}],rules:[{required:!0,message:"请选择上级菜单",trigger:"click"}]},{label:"排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]},{hide:!0,addDisplay:!0,editDisplay:!0,label:"是否报表",prop:"isReport",type:"radio",border:!0,valueFormat:"string",rules:[{required:!0,message:"请选择当前菜单是否为报表",trigger:"blur"}],dicData:[{label:"否",value:"0"},{label:"是",value:"1"}]},{prop:"reportType",size:"small",type:"select",label:"报表类型",dicUrl:"/admin/dict/type/report_type",display:!0,dicMethod:"get",filterable:!0}]},c={data:function(){return{form:{},columnform:{},option:p,lazy:!0,data:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(l["mapGetters"])(["permissions"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permissions.sys_menu_add,!1),delBtn:this.vaildData(this.permissions.sys_menu_del,!1),editBtn:this.vaildData(this.permissions.sys_menu_edit,!1)}}}),created:function(){this.onLoad()},watch:{"form.type":function(){this.showHide()},"form.isReport":function(){this.showHide()}},methods:{rowSave:function(e,i,t){var a=this;Object(s["validatenull"])(e.parentId)&&(e.parentId=-1),Object(r["addObj"])(e).then((function(){i(),a.onLoad(),a.$message.success("添加成功")}))},rowUpdate:function(e,i,t,a){var n=this;Object(s["validatenull"])(e.parentId)&&(e.parentId=-1),Object(r["putObj"])(e).then((function(){t(),n.onLoad(),n.$message.success("修改成功")}))},rowDel:function(e){var i=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(r["delObj"])(e.id)})).then((function(){i.onLoad(),i.$message.success("删除成功")}))},beforeOpen:function(e,i){var t=this;["edit","view"].includes(i)&&Object(r["getObj"])(this.form.id).then((function(e){t.form=e.data,t.columnform=e.data})),e()},onLoad:function(){var e=this;Object(r["fetchMenuTree"])(this.option.lazy).then((function(i){e.data=i.data}))},treeLoad:function(e,i,t){Object(r["fetchMenuTree"])(this.option.lazy,e.id).then((function(e){t(e.data)}))},showHide:function(){var e=this;this.$refs.crud.option.column.filter((function(i){"path"===i.prop&&(i.addDisplay="1"!==e.form.type,i.editDisplay="1"!==e.form.type),"icon"===i.prop&&(i.addDisplay="1"!==e.form.type,i.editDisplay="1"!==e.form.type),"isReport"===i.prop&&(i.addDisplay="0"===e.form.type,i.editDisplay="0"===e.form.type),"reportType"===i.prop&&(console.log(e.form),i.display="1"===e.form.isReport&&"0"===e.form.type),"permission"===i.prop&&(i.addDisplay="1"===e.form.type,i.editDisplay="1"===e.form.type),"parentId"===i.prop&&(i.addDisplay="2"!==e.form.type,i.editDisplay="2"!==e.form.type),"parentId"===i.prop&&(i.rules[0].required="1"===e.form.type),"keepAlive"===i.prop&&(i.addDisplay="0"===e.form.type,i.editDisplay="0"===e.form.type,i.rules[0].required="0"===e.form.type)}))}}},u=c,y=t("2877"),f=Object(y["a"])(u,a,n,!1,null,null,null);i["default"]=f.exports}}]);