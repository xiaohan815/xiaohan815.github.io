(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bac01"],{3916:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log"},[a("basic-container",[a("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.tableData,"table-loading":e.tableLoading,option:e.tableOption,permission:e.permissionList},on:{"on-load":e.getList,"search-change":e.searchChange,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"current-change":e.currentChange,"row-del":e.handleDel}},[a("template",{slot:"search"},[a("avue-date",{staticStyle:{display:"inline-block","margin-right":"20px"},attrs:{type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss",format:"yyyy-MM-dd"},on:{change:e.dateChange}})],1)],2)],1)],1)},i=[],r=a("5530"),s=a("b775");function o(e){return Object(s["default"])({url:"/admin/log/page",method:"get",params:e})}function l(e){return Object(s["default"])({url:"/admin/log/"+e,method:"delete"})}var c={border:!0,index:!0,indexLabel:"序号",stripe:!0,menuAlign:"center",menuWidth:150,align:"center",refreshBtn:!0,showClomnuBtn:!1,searchSize:"mini",searchMenuSpan:6,addBtn:!1,editBtn:!1,viewBtn:!0,props:{label:"label",value:"value"},column:[{label:"类型",prop:"type",type:"select",dicUrl:"/admin/dict/type/log_type",search:!0},{label:"标题",prop:"title"},{label:"IP地址",prop:"remoteAddr"},{label:"请求方式",prop:"method"},{label:"客户端",prop:"serviceId"},{width:80,label:"请求时间",prop:"time"},{width:150,label:"创建时间",prop:"createTime",type:"datetime",format:"yyyy-MM-dd HH:mm",valueFormat:"yyyy-MM-dd HH:mm:ss"}]},d=a("2f62"),h={name:"Log",data:function(){return{tableData:[],searchForm:{},page:{total:0,currentPage:1,pageSize:20},tableLoading:!1,tableOption:c}},computed:Object(r["a"])(Object(r["a"])({},Object(d["mapGetters"])(["permissions"])),{},{permissionList:function(){return{delBtn:this.vaildData(this.permissions.sys_log_del,!1)}}}),methods:{getList:function(e,t){var a=this;this.tableLoading=!0,o(Object.assign({descs:"create_time",current:e.currentPage,size:e.pageSize},t,this.searchForm)).then((function(e){a.tableData=e.data.records,a.page.total=e.data.total,a.tableLoading=!1}))},handleDel:function(e){var t=this;this.$confirm('是否确认删除ID为"'+e.id+'"的日志?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return l(e.id)})).then((function(){t.getList(t.page),t.$message.success("删除成功")}))},searchChange:function(e,t){this.searchForm=e,this.getList(this.page,e),t()},sizeChange:function(e){this.page.pageSize=e},currentChange:function(e){this.page.currentPage=e},refreshChange:function(){this.getList(this.page)},dateChange:function(e){this.$message.success("日期回调"+JSON.stringify(e))}}},g=h,p=a("2877"),u=Object(p["a"])(g,n,i,!1,null,null,null);t["default"]=u.exports}}]);